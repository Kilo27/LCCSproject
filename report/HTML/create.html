<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Report | Create</title>
    <link rel="icon" href="..\media\favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="..\CSS\create.css">
</head>
<body>
    <div id="body">
        <div id="Title"><h1>Create</h1></div>
        <div id="menu">
            <a href="index.html" class="menulink">| Meeting the Brief |</a>
            <a href="investigation.html"class="menulink">| Investigation |</a>
            <a href="plan_and_design.html"class="menulink">| Plan and Design |</a>
            <a href="create.html"class="menulink">| Create |</a>
            <a href="evaluation.html"class="menulink">| Evaluation |</a>
            <a href="references.html"class="menulink">| References |</a>
        </div>
		<div class="heading"><h2>Learning Log</h2></div>
		<div id="learninglog">
				<div class="supercontainer">
					<div class="Container" id="One">
						<h3>Week 1</h3>
						<ul>
							<li>Made mind map of project brief and requirements</li>
							<li>Began working on an idea based around stock predictions</li>
						</ul>
					</div>
					<div>
						<img src="../media/18 Mar 2025 at 15_46.jpg" width="496" height="392" id="FirstImage">
					</div>
				</div>
				<div class="supercontainer">
					<div class="Container" id="Two">
						<h3>Week 2</h3>
						<ul>
							<li>Decided Flask would be a smart and easy way to create an interactive entertainment system</li>
							<li>Attempted to find API to pull live data from the NASDAQ</li>
							<li>Attempted to create a system to recognise the last time the local database of a stock was updated, and fill in all blanks</li>
						</ul>
					</div>
					<div>
						<img src="../media/attempt using flask.png" width="610" height="318" id="SecondImage">
					</div>
				</div>
				<div class="supercontainer">
					<div class="Container" id="Three">
						<h3>Week 3</h3>
						<ul>
							<li>Began work on the report</li>
							<li>Decided to remove Flask and instead use NodeJS due to improved speed and portability of the project.</li>
						</ul>
					</div>
					<div>
						<img src="../media/early days react.png" height="395" width="372" id="ThirdImage">
					</div>
				</div>
				<div class="supercontainer">
					<div class="Container" id="Four">
						<h3>Week 4</h3>
						<ul>
							<li>Streamlined system for obtaining data</li>
							<li>Styling of the report starting, improved the look of the heading and menu objects.</li>
						</ul>
					</div>
					<div>
						<img src="../media/CSVtoARR.png" width="630px" height="390" id="FourthImage">
					</div>
				</div>
				<div class="supercontainer">
					<div class="Container" id="Five">
						<h3>Week 5</h3>
						<ul>
							<li>Continued working with NodeJS, installing React, etc</li>
							<li>Improvements to main.py</li>
						</ul>
					</div>
					<div>
						<img src="../media/default react.png" width="370px" height="390px" id="FifthImage">
					</div>
				</div>
				<div class="supercontainer">
					<div class="Container" id="Six">
						<h3>Week 6</h3>
						<ul>
							<li>Improvements to Report</li>
							<li>Creating Graphs with Python (Broken at first)</li>
						</ul>
					</div>
					<div>
						<img src="../media/broken graphs/TinyGraph_HugeRegressionLine.png" width="472px" height="354" id="SixthImage">
					</div>
				</div>
				<div class="supercontainer">
					<div class="Container" id="Seven">
						<h3>Week 7</h3>
						<ul>
							<li>Removed API temporarily to better satisfy basic requirements</li>
							<li>CSV handling, taking data from a database</li>
							<li>Finished working on a graph of stock Opening, Closing, High and Low prices, decided to make the graph Year-To-Date</li>
							<li>Graph was reversed, beacuse csv from Nasdaq placed newest dates at the top</li>
							<li>Styling the report body</li>
						</ul>
						<!--Do not Forget the image for this part is on your other laptop-->
					</div>
				</div>
				<div class="supercontainer">
					<div class="Container" id="Eight">
						<h3>Week 8</h3>
						<ul>
							<li>Completed linear regression from YTD lowest point</li>
							<li>Graph is exported to JSON file</li>
						</ul>
					</div>
					<div>
						<img src="../media/broken graphs/debug_graph.png"width="480" height="240" id="EighthImage">
					</div>
				</div>
				<div class="supercontainer">
					<div class="Container" id="Nine">
						<h3>Week 9</h3>
						<ul>
							<li>Interactive information system usable, with NodeJS and ReactJS</li>
							<li>Graphs all working, and updating live</li>
						</ul>
					</div>
				</div>
				<div class="supercontainer">
					<div class="Container" id="Ten">
						<h3>Week 10</h3>
						<ul>
							<li>Backend server created to handle user submission data</li>
							<li>Pie Chart done of responses</li>
						</ul>
					</div>
				</div>
				<div class="supercontainer">
					<div class="Container" id="Eleven">
						<h3>Week 11</h3>
						<ul>
							<li>All Python moved to the server in order to execute correctly</li>
							<li>Predictions are calculated based on regression lines</li>
							<li>Users now get a choice of whichever stock they like, instead of just Apple</li>
							<li>Styling completed on information System</li>
						</ul>
					</div>
					<div>
						<img src="../media/Screenshot 2025-03-11 163443.png" width="450" height="375" id="EleventhImage">
					</div>
				</div>
				<div class="supercontainer">
					<div class="Container" id="Twelve">
						<h3>Week 12</h3>
						<ul>
							<li>Cleaning up code</li>
							<li>Finishing Report</li>
						</ul>
					</div>
					<div>
						<img src="../media/finished project.png" width="300" height="384" id="TwelfthImage">
					</div>
				</div>
			</div>
			<div id="Testcases">
				<div class="heading"><h2>Testing</h2></div>
				<div id="testcasetable">
					<table>
						<tr>
							<th>Test Case</th>
							<th>Expected Result</th>
							<th>Actual Result</th>
							<th>Pass/Fail</th>
						</tr>
						<tr>
							<td>Both Actual and Suggested Values Higher than Starting Value</td>
							<td>true</td>
							<td>true</td>
							<td>Pass</td>
						</tr>
						<tr>
							<td>Actual Value higher than Starting, while suggested is below starting</td>
							<td>false</td>
							<td>false</td>
							<td>Pass</td>
						</tr>
						<tr>
							<td>Both Actual and Suggested Value equal Starting exactly</td>
							<td>true</td>
							<td>false</td>
							<td>Fail</td>
						</tr>
					</table>
				</div>
				<div id="testcasetext">
					<p>There were a few points in the project where testing was necessary, to the left you can see an example, testing the expected values of the accuracy report. While in most cases it worked flawlessly, there was one specific condition that failed. If the suggested value and actual value were over or under the starting value, everything worked perfectly, however if they were equal to each other, it would return a false instead of true. This was because I forgot an equals sign, instead of >= (greater or equal to) I used > (greater than)</p>
				</div>
			</div>
			<div id="Issues">
				<div class="heading"><h2>Issues</h2></div>
				<div id="firstissue">
					<div class="issueparagraph">
						<p>While working on the regression lines, I discovered a major error. For context, there are four regressions calculated, </p>
						<ol>
							<li>Year-to-date linear regression,</li>
							<li>The lowest point this year,</li>
							<li>The last seven days, </li>
							<li>The lowest point in the last seven days</li>
						</ol>
						<p>
							It is not possible to calculate those, if the lowest price offer was the most recent data source. This issue was only discovered because the Stock Market crashed recently, had that not happened, it is likely this issue would not have been discovered, now, if the dataset for regression is only one value long, the slope is calculated to be zero. There was however another error with the regression lines too. In the graph to the left, you can see a stock that is clearly falling, at an extremely quick rate. However, the prediction being given was extremely positive, to the point of suspicion, as it turned out, having each regression line given equal weight in the prediction equation was a mistake. The two “low” regressions need to be valued a lot less, as they were predicting wild changes in stocks, because of a mild day-to-day rebound. Weighing these for less resulted in a far more accurate prediction

						</p>
					</div>
					<div id="firstimage">
						<img src="../media/coefficient numbers broken.png" id="firstissueimage">
					</div>
				</div>
				<div id="secondissue">
					<div class="issueparagraph">
						<p>There was however another error with the regression lines too. In the graph to the left, you can see a stock that is clearly falling, at an extremely quick rate. However, the prediction being given was extremely positive, to the point of suspicion, as it turned out, having each regression line given equal weight in the prediction equation was a mistake. The two “low” regressions need to be valued a lot less, as they were predicting wild changes in stocks, because of a mild day-to-day rebound. Weighing these for less resulted in a far more accurate prediction</p>
					</div>
					<div id="firstimage">
						<img src="../media/broken graphs/brokenregression.png" id="firstissueimage" width="379" height="190">
					</div>
				</div>
			</div>
			<div id="importantfiles">
				<div class="heading"><h2>Important Files</h2></div>
				<div id="backend">
					<div class="heading"><h3>Backend</h3></div>
					<div id="serverindex">
						<div id="index1">
							<h4 style="text-align: center;">index.js</h4>
							<p style="padding-left: 50px;">This file primarily handles routing, connecting users to the database and Python scripts for data processing. It:</p>
							<ol>
								<li>Defines the database schema and establishes connections.</li>
								<br>
								<li>Stores form submissions, ensuring correct formatting and error handling.</li>
								<br>
								<li>Retrieves accuracy data for the pie chart.</li>
								<br>
								<li>Processes stock code inputs, executing Python scripts with proper error handling.</li>
							</ol>
							<p>It serves as the backbone of the project.</p>
						</div>
						<div id="index1images">
							<img src="../media/index1.png" id="imgindex1">
							<img src="../media/index2.png" id="imgindex2">
							<img src="../media/index3.png" id="imgindex3">
							<img src="../media/index4.png" id="imgindex4">
						</div>
					</div>
					<div id="pymain">
						<div id="main">
							<h4 style="text-align: center;">main.py</h4>
							<p style="padding-left: 50px;">Main.py is a crucial part of this project, with its most important tasks including:</p>
							<ul>
								<li>Calling webscrape.py,</li>
								<li>Converting the CSV to JSON, cleaning the data as it goes,</li>
								<li>Calculating graphs,</li>
								<li>Doing linear regression calculations to provide predictions, where arr [0] is a point on the line, and arr [1] is the slope.</li>
								<li>Estimating the price a week from now.</li>
							</ul>
							<p style="padding-left: 50px;">Graphs that were calculated in python are saved as images, for debugging.</p>
						</div>
						<div id="mainimages">
							<img src="../media/main1.png" id="img1main">
							<img src="../media/main2.png" id="img2main">
							<img src="../media/main3.png" id="img1main">
							<img src="../media/main4.png" id="img2main" style="max-width: 30%; height:auto;">
						</div>
					</div>
				</div>
				<div id="ui">
					<div class="heading"><h3>UI</h3></div>
					<div style="height:400px;">
						<div id="data" class="Container">
							<h4 style="text-align: center;" >data.js</h4>
							<p>Handles user input, changes title, sends POST request to index.js.</p>
						</div>
						<div id="app"class="Container">
							<h4 style="text-align: center;">app.js</h4>
							<p>Renders all graphs using plotly.</p>
						</div>
					</div>
					<div style="height: 400px;">
						<div id="form"class="Container">
							<h4 style="text-align: center;">form.js</h4>
							<p>Client side of form, takes data, validates it, sends it to index.js, clears field for other input</p>
						</div>
						<div id="accuracyreport" class="Container">
							<h4 style="text-align: center;">accuracyreport.js</h4>
							<p>Gets the accuracy report from the database, through index.js</p>
						</div>
					</div>
				</div>
				<div id="pseudocode">
					<div class="heading"><h2>Pseudocode</h2></div>
					<div id="pseudoparagraph" class="Container">
						<p>As part of my project, I implemented a linear regression model to analyse Apple’s stock
							prices. The purpose of this algorithm is to:</p>
							<ol>
								<li>Extract and process stock price data from the dataset.</li>
								<li>Perform regression analysis on different subsets of the data (full dataset, after the lowest price, last 7 days, etc.).</li>
								<li>Plot regression lines alongside stock prices to visualise trends.</li>
								<li>Predict the stock price for the next 7 days based on the average trend.</li>
							</ol>
					</div>
					<div id="pseudocodeforreg" class="Container">
						<p>Function slopefunction(all x values, all y values):</p>
						<p style="text-indent:20px;">Number of elements on x axis</p>
						<p style="text-indent:20px;">Get the mean of both axis</p>
						<p style="text-indent:20px;">If mean equals 0 for x, return 0,0 to avoid divide by zero error</p>
						<p style="text-indent:20px;">Calculate covariance of x and y</p>
						<p style="text-indent:20px;">Calculate xovariance of x</p>
						<p style="text-indent:20px;">Calculate slope (m=covariance of x and y, divided by covariance of x)</p>
						<p style="text-indent:20px;">Y Intercept equals mean of y minus the slope times the mean of x</p>
						<p style="text-indent:20px;">return slope and Y Intercept</p>
						<p>Plot the regression line using the number of values in the x-axis, the starting point of the regression line, the y-intercept, and the slope</p>
					</div>	
					<div id="pseudolist"class="Container">
						<ol>
							<li>
								Data Preparation
								<ul>
									<li>The dataset is loaded into NumPy arrays for processing.</li>
									<li>Dates are converted into numerical values to facilitate regression calculations.</li>
									<li>The lowest stock closing price is identified to analyse price recovery trends.</li>
								</ul>
							</li>
							<li>
								Regression Computation
								<ul>
									<li>The estimate_coefficient() function calculates the slope (m) and intercept (c) of the regression equation: y=mx+c</li>
									<li>
										Separate regression models are computed for:
										<ul>
											<li>The entire dataset</li>
											<li>The period after the lowest price</li>
											<li>The last 7 days of data</li>
											<li>The last 7 days after the lowest price</li>
										</ul>
									</li>
								</ul>
							</li>
							<li>
								Visualisation
								<ul>
									<li>Stock prices are plotted using Matplotlib.</li>
									<li>Regression trend lines are added to illustrate trends over time.</li>
								</ul>
							</li>
							<li>
								Future Price Prediction
								<ul>
									<li>The average regression slope is calculated to estimate price trends.</li>
									<li>The predicted stock price for the next 7 days is computed using this trend.</li>
								</ul>
							</li>
						</ol>
						<p>This method helps predict stock trends and identify market patterns by:
							Analysing price movements over different time frames
							Providing regression-based insights into stock trends
							Predicting future stock prices using mathematical analysis</p>
					</div>
				</div>
			</div>`
			<div id="datacomparison">
				<div class="heading"><h2>Data Before and After Cleaning</h2></div>
				<table id="datatable">
					<tr>
						<th>type</th>
						<th>raw</th>
						<th>clean</th>
					</tr>
					<tr>
						<td>Date</td>
						<td>"03/18/25"</td>
						<td>"03/18"</td>
					</tr>
					<tr>
						<td>Close</td>
						<td>"$214.00"</td>
						<td>214.00</td>
					</tr>
				</table>
			</div>
			<footer></footer>
</body>
</html>